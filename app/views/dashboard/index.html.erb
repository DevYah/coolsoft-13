<script src='http://www.google.com/jsapi'></script>

<div class="tabbable tabs-left">
  <ul class="nav nav-tabs">
    <li class="active"><a href="#pane1" data-toggle="tab">My Ideas</a></li>
    <% if @user.type == "Committee" %>
      <li><a href="#pane2" data-toggle="tab">Approved Ideas</a></li>
    <% end %>
  </ul>
  <div class="tab-content">
    <div id="pane1" class="tab-pane active">
      <div id = "own" class = "idea-list">
        <h4> My Ideas </h4>
        <% @own_ideas.each do |idea| %>
          <%@own_counter = @own_counter + 1%>
          <button type="button" class="idea-button btn btn-primary" data-toggle="button" data-idea-id="<%= @own_counter %>" value='0' data-link="<%= (url_for :controller => 'dashboard', :action => 'gettags', :ideaid => idea.id, :remote => true).html_safe %>"><%= idea.title %></button>
        <% end %>
      </div>
      <div class="bulb-container well">
      </div>
      </div>
    <% if @user.type == "Committee" %>
      <div id="pane2" class="tab-pane">
        <div id = "comm" class = "idea-list">
          <h4> Approved Ideas </h4>
          <% @approved_ideas.each do |idea| %>
            <%@approved_counter = @approved_counter + 1%>
            <button type="button" class="idea-button btn btn-primary" data-toggle="button" data-idea-id = "<%= @approved_counter %>" value='0' data-link="<%= (url_for :controller => 'dashboard', :action => 'gettags', :ideaid => idea.id, :remote => true).html_safe %>"><%= idea.title %></button>
          <% end %>
        </div>
        <div class="bulb-container well">
        </div>
      </div>
    <% end %>
  </div><!-- /.tab-content -->
</div><!-- /.tabbable -->
<div id="graph">
</div>
<div id="tagsall">
</div>
<script type="text/javascript">
$(document).ready(function(){
  $('#comm .idea-button').click(function() {
      var count = $("#pane2 .bulb-container").length;
      if(this.value == 0) {
        var thresholds_temp = <%= @approved_thresholds%>;
        var approved_ideas = <%= @approved_ideas.to_json.html_safe %>;
        var idea = approved_ideas[parseInt($(this).attr('data-idea-id'))-1];
        var title = idea.title;
        var id = idea.id;
        var this_threshold = thresholds_temp[parseInt($(this).attr('data-idea-id'))-1];

        if(this_threshold == 0){
          $('#pane2 .bulb-container').append(
            "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>"
            );
        }
        else if(this_threshold == 1){
          $('#pane2 .bulb-container').append(
            "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-10'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }

        else if(this_threshold == 2){
          $('#pane2 .bulb-container').append(
             "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-20'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>"
            );
        }
        else if(this_threshold == 3){
          $('#pane2 .bulb-container').append(
             "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-100'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>"
            );
        }

        else if(this_threshold == 4){
          $('#pane2 .bulb-container').append(
             "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-40'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }

        else if(this_threshold == 5){
          $('#pane2 .bulb-container').append(
             "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-50'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>"
            );
        }

        else if(this_threshold == 6){
          $('#pane2 .bulb-container').append(
             "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-60'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        else if(this_threshold == 7){
          $('#pane2 .bulb-container').append(
             "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-70'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        else if(this_threshold == 8){
          $('#pane2 .bulb-container').append(
             "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-80'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        else if(this_threshold == 9){
          $('#pane2 .bulb-container').append(
             "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-90'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        else if(this_threshold == 10){
          $('#pane2 .bulb-container').append(
             "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-100'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        this.value = 1;
      }
      else {
        $('#pane2 .bulb-container '+'#'+ $(this).attr('data-idea-id')).remove();
        this.value = 0;
      }
  });

  $('#own .idea-button').click(function() {
      if(this.value == 0) {
        var thresholds_temp = <%= @own_thresholds%>;
        var own_ideas = <%= @own_ideas.to_json.html_safe %>;
        var idea = own_ideas[parseInt($(this).attr('data-idea-id'))-1];
        var title = idea.title;
        var this_threshold = thresholds_temp[parseInt($(this).attr('data-idea-id'))-1];

        if(this_threshold == 0){
          $('#pane1 .bulb-container').append(
            "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        else if(this_threshold == 1){
          $('#pane1 .bulb-container').append(
            "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-10'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }

        else if(this_threshold == 2){
          $('#pane1 .bulb-container').append(
             "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-20'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>"
            );
        }
        else if(this_threshold == 3){
          $('#pane1 .bulb-container').append(
             "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-30'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>"
            );
        }

        else if(this_threshold == 4){
          $('#pane1 .bulb-container').append(
             "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-40'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }

        else if(this_threshold == 5){
          $('#pane1 .bulb-container').append(
             "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-50'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>"
            );
        }

        else if(this_threshold == 6){
          $('#pane1 .bulb-container').append(
             "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-60'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        else if(this_threshold == 7){
          $('#pane1 .bulb-container').append(
             "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-70'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        else if(this_threshold == 8){
          $('#pane1 .bulb-container').append(
             "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-80'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        else if(this_threshold == 9){
          $('#pane1 .bulb-container').append(
             "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-90'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
        else if(this_threshold == 10){
          $('#pane1 .bulb-container').append(
             "<div class='bulb-container-own' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-100'></div></div>"+ 
              "<p class='idea-title'>" + "<a data-remote='true' href='" + $(this).attr('data-link') + "'>" + title + "</a>" + "</p></div>" 
            );
        }
      this.value = 1;
        }
        else {
          $('#pane1 .bulb-container '+'#'+ $(this).attr('data-idea-id')).remove();
          this.value = 0;
        }
  });

});
</script>
