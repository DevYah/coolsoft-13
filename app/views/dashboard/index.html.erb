<h1 align="middle">Dashboard</h1>

<div class="tabbable tabs-left">
  <ul class="nav nav-tabs">
    <li class="active"><a href="#pane1" data-toggle="tab">My Ideas</a></li>
    <% if @user.type == "Committee" %>
    <li><a href="#pane2" data-toggle="tab">Approved Ideas</a></li>
    <% end %>
  </ul>
  <div class="tab-content">
    <div id="pane1" class="tab-pane active">
      <div class = "span8 idea-list" id = "own">
        <h4 style = "display:inline"> My Ideas </h4>
        <% @own_ideas.each do |idea| %>
          <%@own_counter = @own_counter + 1%>
          <button type="button" class="idea-button btn btn-primary" data-toggle="button" data-idea-id = "<%= @own_counter %>" value='0' ><%= idea.title %></button>
        <% end %>
        </span>
      </div>
      <div id="bulb-container">
      </div>
    </div>
    <% if @user.type == "Committee" %>
    <div id="pane2" class="tab-pane">
      <div class = "span2 offset8 idea-list" id = "comm">
        <h4 style = "display:inline"> Approved Ideas </h4>
        <% @approved_ideas.each do |idea| %>
          <%@approved_counter = @approved_counter + 1%>
          <button type="button" class="idea-button btn btn-primary" data-toggle="button" data-idea-id = "<%= @approved_counter %>" value='0'><%= idea.title %></button>
        <% end %>
      </div>
      <div class="bulb-container">
      </div>
    </div>
    <% end %>
  </div><!-- /.tab-content -->
</div>
</div><!-- /.tabbable -->


<script type="text/javascript">
$(document).ready(function(){
  $('#comm .idea-button').click(function() {
      if(this.value == 0) {
        var thresholds_temp = <%= @approved_thresholds%>;
        var approved_ideas = <%= @approved_ideas.to_json.html_safe %>;
        var idea = approved_ideas[parseInt($(this).attr('data-idea-id'))-1];
        var title = idea.title;
        var this_threshold = thresholds_temp[parseInt($(this).attr('data-idea-id'))-1];

        if(this_threshold == 1){
          $('#pane2 .bulb-container').append(
            "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-1'></div></div>"+ 
              "<p class='idea-title'>" + title + "</p></div>" 
            );
        }
        else if(this_threshold == 2){
          $('#pane2 .bulb-container').append(
            "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-2'></div></div>"+ 
              "<p class='idea-title'>" + title + "</p></div>" 
            );
        }

        else if(this_threshold == 3){
          $('#pane2 .bulb-container').append(
            "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-3'></div></div>"+ 
              "<p class='idea-title'>" + title + "</p></div>" 
            );
        }
        else if(this_threshold == 4){
          $('#pane2 .bulb-container').append(
            "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-4'></div></div>"+ 
              "<p class='idea-title'>" + title + "</p></div>" 
            );
        }
        else if(this_threshold == 5){
          $('#pane2 .bulb-container').append(
            "<div class='bulb-container-comm' id='" + parseInt($(this).attr('data-idea-id')) + "'>" +
              "<div class='bulb-img'><div class='threshold-5'></div></div>"+ 
              "<p class='idea-title'>" + title + "</p></div>" 
            );
        }
      this.value = 1;
        }
        else {
          $('#pane2 .bulb-container '+'#'+ $(this).attr('data-idea-id')).remove();
          this.value = 0;
        }
  });

  $('#own #btns').click(function() {

      var thresholds_temp = '<%= @own_thresholds%>'
      var this_threshold = thresholds[this.title - 1];

      if(this_threshold == 1){
      $('#pane1 .bulbContainer #img').append('<%= image_tag "0.jpg" %>');
      }
      else if(this_threshold == 2){
       $('#pane1 .bulbContainer #img').append('<%= image_tag "1.jpg" %>');
      }

      else if(this_threshold == 3){
       $('#pane1 .bulbContainer #img').append('<%= image_tag "2.jpg" %>');
      }

      $('#pane1 .bulbContainer #titles').append(idea_titles[this.title]);
      this.value = 1;
 });

});
</script>