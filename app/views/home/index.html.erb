<div id='tags'>
  <% if @tags2 %>
    <% @tags2.each do |tag| %>
      <label><%= tag %></label>
    <% end %>
  <% end %>
</div>
<%= render 'ideas/show' %>
<div id = "IdeaStream">
	<div class = "page">
		<%= render :partial => 'stream' %>
	</div>	


   
 </div>


<style type = "text/css">
  
  .idea-vote{
    padding-left: 500px;
    font-size: 35px;
  }

  .pull{
    padding-left: 475px;
  }

  .block{
    box-shadow: 0px 0px 2px rgba(51,51,51,0.9);
    margin-bottom: 20px;
  }

  .wrapper{
    margin-top: 20px;
  }

  .margin{
    margin-top: 10px;
    margin-bottom: 15px;
  }
</style>


<script type="text/javascript">
(function() {
  var page = 1,
      loading = false;

  function nearBottomOfPage() {
    return $(window).scrollTop() > $(document).height() - $(window).height() - 100;
  }

  $(window).scroll(function(){
    if (loading) {
      return;
    }

    if(nearBottomOfPage()) {
      loading=true;
      page++;
          var array = [];
          var i = 0;
          $('#tags label').each(function() {
          array[i] = $(this).text();
          i++;
        });
          $.ajax({
                  type: 'POST',
                  url: '/home/index',
                  data: { 
                    myTags : array,
                    myPage : page
                     },
                  beforeSend:function(){

                    // this is where we append a loading image
                    //$('#ajax-panel').html('<div class="loading"><img src="/images/loading.gif" alt="Loading..." /></div>');
                  },
                  success:function(array){
                    loading = false;
                  },
                  error:function(){

                    // failed request; give feedback to user
                    alert('failure');
                  }
            });
    }
  });

  
}());
</script>