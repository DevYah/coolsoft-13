<%= render :partial => 'ideas/show' %>
<%= render :partial => 'stream' %>
<% content_for :sidebar do %>
  <% if current_user.nil? %>
    <%= link_to 'Post an idea', {:controller => 'ideas' ,:action => 'new'},:class => "btn btn-large btn-primary btn-block post-an-idea"%>
  <% else %>
    <%= link_to 'Post an idea', {:controller => 'ideas' ,:action => 'new'},:class => "btn btn-large btn-primary btn-block"%>
  <% end %>
<% end %>
<% content_for :sidebar do %>
  <% if MonthlyWinner.all.count > 0 %>
  <div class='topten'>
    <div class='row'>
      <h3 class='title1'>Idea of the Month</h3>
    </div>
    <div id="myCarousel" class="carousel slide">
      <!-- Carousel items -->
      <div class="carousel-inner">
        <div class="active item">
          <div id='idea_of_the_month'>
            <div class='row'>
              <% month = @first.created_at.month %>
              <% case month %>
              <% when 1 %>
              <h1 class='title'>January</h1>
              <% when 2  %>
              <h1 class='title'>February</h1>
              <% when 3 %>
              <h1 class='title'>March</h1>
              <% when 4 %>
              <h1 class='title'>April</h1>
              <% when 5 %>
              <h1 class='title'>May</h1>
              <% when 6 %>
              <h1 class='title'>June</h1>
              <% when 7 %>
              <h1 class='title'>July</h1>
              <% when 8  %>
              <h1 class='title'>August</h1>
              <% when 9 %>
              <h1 class='title'>September</h1>
              <% when 10  %>
              <h1 class='title'>October</h1>
              <% when 11 %>
              <h1 class='title'>November</h1>
              <% when 12  %>
              <h1 class='title'>December</h1>
              <% end %>
            </div>
            <div class="topten_idea media">
              <a class="pull-left" href="#">
                <span class="image"><%= image_tag(@first.photo.url(:thumb), :size => "80x80") %></span>
              </a>
              <div class="media-body">
                <span><%= link_to  @first.user.username, @first.user.becomes(User)  %></span>
                <h4 class="media-heading idea">
                  <%= link_to @first.title ,@first %>
                </h4>
                <span class="badge"><%= @first.num_votes %>
                  votes</span>
              </div>
            </div>
          </div>
        </div>
        <% @winners.each do |second| %>
          <% @second=Idea.find(second.idea_id) %>
          <div class="item">
            <div id='idea_of_the_mouth'>
              <div class='row'>
                <% month = @first.created_at.month %>
                <% case month %>
                <% when 1 %>
                <h1 class='title'>January</h1>
                <% when 2  %>
                <h1 class='title'>February</h1>
                <% when 3 %>
                <h1 class='title'>March</h1>
                <% when 4 %>
                <h1 class='title'>April</h1>
                <% when 5 %>
                <h1 class='title'>May</h1>
                <% when 6 %>
                <h1 class='title'>June</h1>
                <% when 7 %>
                <h1 class='title'>July</h1>
                <% when 8  %>
                <h1 class='title'>August</h1>
                <% when 9 %>
                <h1 class='title'>September</h1>
                <% when 10  %>
                <h1 class='title'>October</h1>
                <% when 11 %>
                <h1 class='title'>November</h1>
                <% when 12  %>
                <h1 class='title'>December</h1>
                <% end %>
              </div>
              <div class="topten_idea media">
                <a class="pull-left" href="#">
                  <span class="image"><%= image_tag(@second.photo.url(:thumb), :size => "80x80") %></span>
                </a>
                <div class="media-body">
                  <span><%= link_to  @second.user.username, @second.user.becomes(User)  %></span>
                  <h4 class="media-heading idea">
                    <%= link_to @second.title ,@second %>
                  </h4>
                  <span class="badge"><%= @second.num_votes %>
                    votes</span>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
      <!-- Carousel nav -->
      <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
      <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div>
  </div>
  <% end %>
  <div class="topten">
    <h1 class="title">Top Ten
    </h1>
    <% @top.each do |top| %>
      <% if top.user.active == true and top.user.banned == false%>
        <div class="topten_idea media well">
           <h4 class="media-heading idea">
              <a data-popover-idea-id=<%=top.id %>>
                <%= top.title %>
              </a>
            </h4>
          <a class="pull-left" href="#">
            <span class="image"><%= image_tag(top.photo.url(:thumb), :size => "40x40") %></span>
          </a>
          <div class="media-body">
            <span>by: <%= link_to  top.user.username, top.user.becomes(User)  %></span>
            <br>
            <span class="badge"><%= top.num_votes %>
              votes</span>
          </div>
        </div>
      <% end %>
    <%end%>
  </div>
  <%= render :partial => 'trends/index' %>
  <div class="affix" data-spy='affix'>
    <button class="btn backtotop" type="button">To Top
      <i class = 'icon-black icon-hand-up'></i></button>
  </div>
<script type="text/javascript">
    $('.backtotop').click(function(){
      $('html, body').animate({scrollTop:0}, 'slow');
      });
     $(document).ready(function(){
      $('.backtotop').hide();
    });
</script>
<% end %>

<style type = "text/css">
  .totop{
    margin: auto;
  }

  .idea-vote{
    padding-left: 87%;
    font-size: 35px;
  }

  .block{
    box-shadow: 0px 0px 2px rgba(51,51,51,0.9);
    margin-bottom: 20px;
  }

  .wrapper{
    margin-top: 20px;
  }

  .margin{
    margin-top: 10px;
    margin-bottom: 15px;
  }
</style>
