<link rel="stylesheet" type="text/css" media="all"
      href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/smoothness/jquery-ui.css"/>
<h1>
  <% if @user.username != "" and @user.username %>
    <%= @user.username %>'s Profile
  <% else %>
    User's Profile
  <% end %>
</h1>
<% if @user.banned == true %>
  <p class='text-error'>This User is currently banned!</p>
<% elsif @user.active == false %>
  <p class='text-error'>This User is currently deactivated!</p>
<% end %>
<div class='options' style="display: inline">
  <% if current_user == @user %>
    <div class= 'btn'><%= link_to "Edit" , edit_user_registration_path %></div>
  <% end %>
</div>
<% if @admin != nil && @admin.type == 'Admin' && @user.active == true && @user.banned == false && @admin.id != @user.id%>
  <%= link_to 'Ban', { :controller => 'admins', :action => 'ban_unban' }, :id =>params[:id], :confirm => 'Are you sure you want to Ban this user?', :class => 'options btn btn-danger' %>
<% end %>
<% if @admin != nil && @admin.type == 'Admin' && @user.banned==true && @admin.id != @user.id%>
  <%= link_to 'Unban', { :controller => 'admins', :action => 'ban_unban' }, :id =>params[:id], :confirm => 'Are you sure you want to Unban this user?', :class => 'options btn btn-success' %>
<% end %>
<div style="display: inline">
  <% if @admin != nil && @admin.type == 'Committee' && @admin.id == @user.id%>
    <%= link_to 'Review Ideas', { :controller => 'committees', :action => 'review_ideas' }, :class => 'btn' %>
  <% end %>
</div>
<% if @user.banned == false and @user.active == true %>
  <div id='user'>
    <div class='user-photo'>
      <%= image_tag @user.photo.url(:medium) %>
    </div>
    <div class = 'user-details'>
      <dl class='dl-horizontal'>
        <dt>Email</dt>
        <dd><%= @user.email %></dd>
        <br />
        <% if @user != current_user %>
          <dt>First Name</dt>
          <dd>
            <% if @user.first_name != "" and @user.first_name %>
              <%= @user.first_name %>
            <% else %>
              Not specified
            <% end %>
          </dd>
          <br />
          <dt>Last Name</dt>
          <dd>
            <% if @user.last_name != "" and @user.last_name %>
              <%= @user.last_name %>
            <% else %>
              Not specified
            <% end %>
          </dd>
          <br />
          <dt>Date of birth
          </dt>
          <dd>
            <% if @user.date_of_birth != "" and @user.date_of_birth %>
              <%= @user.date_of_birth %>
            <% else %>
              Not specified
            <% end %>
          </dd>
          <br />
          <dt>Gender</dt>
          <dd>
            <% if @user.gender != "" and @user.gender %>
              <%= @user.gender %>
            <% else %>
              Not specified
            <% end %>
          </dd>
        <% else %>
          <dt>First Name</dt>
          <dd>
            <%= best_in_place @user.becomes(User), :first_name, :nil => 'click to specify your first name' %>
          </dd>
          <br />
          <dt>Last Name</dt>
          <dd>
            <%= best_in_place @user.becomes(User), :last_name, :nil => 'click to specify your last name' %>
          </dd>
          <br />
          <dt>Date of birth
          </dt>
          <dd>
            <%= best_in_place @user.becomes(User), :date_of_birth, :type => 'date', :nil => 'not specified' %>
          </dd>
          <br />
          <dt>Gender</dt>
          <dd>
            <%= best_in_place @user.becomes(User), :gender, :type => :select, :collection => [['male', 'male'], ['female', 'female'], ['', 'unspecified']], :nil => 'Unspecified' %>
          </dd>
        <% end %>
      </dl>
      <dl id='user-about'>
        <dt>About User</dt>
        <br />
        <dd>
          <% if current_user == @user %>
            <%= best_in_place @user.becomes(User), :about_me, :type => 'textarea', :nil => 'click to fill your about me' %>
          <% elsif @user.about_me != "" and @user.about_me %>
            <%= @user.about_me %>
          <% else %>
            Not specified
          <% end %>
        </dd>
      </dl>
    </div>
  </div>
  <h2>
    User Ideas
  </h2>
  <%= render :partial => "stream" %>
  <div class='new-idea'>
    <%= link_to 'Create new Idea!', '/ideas/new', :class => 'btn btn-large btn-block' %>
  </div>
  <div>
    <br />
    <ul class="pager">
      <li><%= link_to 'Back', :back %></li>
    </ul>
  </div>
<% end %>
